.TH JACK.PLUMBING "1" 0.5 "November 2005"
.SH NAME
jack.plumbing \- JACK Plumbing Daemon
.SH SYNOPSIS
.B jack.plumbing
.RI [ options ]
.RI [ rule-files ]
.SH OPTIONS
.TP
.B \-d
Do not operate as a daemon.
.TP
.B \-o
Do not load ordinary rule files.
.TP
.B \-q
Quiet operation.
.TP
.B \-u
Set the time, in micro-seconds, that must elapse after a connection
notification to indicate the end of a notification set
(default=30000).  This is an optimization switch.
.SH DESCRIPTION
.B jack.plumbing
maintains a set of port connection rules and manages these as clients
register ports with JACK.  Port names are implicitly bounded regular
expressions and support sub-expression patterns.
.PP
There are four rules: 
.IR connect ", " disconnect ", " also-connect " and " connect-exclusive .  
.PP
The rule:
.PP
  (connect "SuperCollider:out_(.*)" "alsa_pcm:playback_\\1")
.PP
ensures that whenever 
.BR scsynth (1) 
is running any output ports it registers are connected to appropriate
ALSA playback ports.  The connect rule only makes a connection if none
already exist.
.PP
The rule:
.PP
  (also-connect "alsa_pcm:playback_\1"  "jack.udp-[0-9]*:in_\1")
.PP
ensures that when
.BR jack.udp (1)
is running in 
.I send
mode all signals that are ordinarily sent to the local audio interface
will also be sent to the network destination.  The
.I also-connect
aliasing applies to both the left and right hand side of
.I connect
rules.
.PP
The rule:
.PP
  (connect-exclusive "SuperCollider:out_(.*)" "ardour:sc3_in_\\1/in 1")
.PP
ensures that if SuperCollider and an 
.BR ardour (1) 
session with appropriate tracks are both running that SuperCollider
gets connected to ardour and disconnected from everything else.
.PP
This type of connection daemon has the following advantages over both
environment variables and command line arguments: 1. it does not
require any client connection support or logic at all, 2. it provides
a uniform user interface to all clients, and 3. it has a somewhat
declarative style.
.PP
This type of daemon is very lightweight and non-intrusive: it requires
no arguments, it runs from an unprivileged thread, if the rule set is
empty it is a no-op, it does not write any files, it does not require
any modification to clients or to how clients are started.
.PP
When a set of port registrations is made it checks the modification
time of the rule set files, 
.IR /etc/jack.plumbing " and " ~/.jack.plumbing ,
and any files specified by the user, re-reads the rule set if it has
been updated, then makes the JACK graph obey the rules.
.PP
Any lines beginning with a semi-colon are ignored.
.PP
The rule set is sorted, disconnect rules are applied first, then
connect rules, then connect-exclusive rules.
.SH FILES
/etc/jack.plumbing
.br
~/.jack.plumbing
.SH AUTHOR
Rohan Drape <http://slavepianos.org/rd/>
.SH SEE ALSO
.BR jackd (1)
